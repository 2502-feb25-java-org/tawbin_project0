//*****/validations in JS for Sign Up page in practice1
//required fields:all,
//first and last name should not be same (validation)
//user is only allowed to put numerical keys not any alphabet/special characters. it should be only 10 digits with 3 - only with area code
//prepopulate values of all the properties in the form when page is reloaded using addEventListener ******

/*function storeSearch1(){
    var searchBox1=document.getElementById("first name").value;
    localStorage.search=searchBox1;
}
function loadOldSearch1(){
    var searchBox1=document.getElementById("first name");
    searchBox1.value=localStorage.search;
}

//stack overflow
window.onload = function() {
    var name = localStorage.getItem(name);
    if (name !== null) document.getElemenyById("first name").value = name;
}*/

//for gender may be this will work => document.gendersForm.gender.value="F";
//capture the first and last name and compare to make sure they are not the same*****
//validate that phone number does not let user to type anything besides numerical digits *******

///START of Actual code


window.onload = function() {
    GetValuesfromStorage();
}
function Validate()
{
    let firstName = document.getElementById('txtfirstName');
    let lastName = document.getElementById('txtlastName');

    if(firstName.value == lastName.value)
    {
        alert("firstname and lastname cannot be the same");
        return false;
    }

    return true;
}

function StoreValues(e)
{
    //Generic way to store individual items
    localStorage.setItem(e.id,e.value);
    //localStorage.firstName = e.value;
    //localStorage.lastName = e.value;
}

function GetValuesfromStorage()
{
    //Generic way to store individual items
    //localStorage.getItem(e.id,e.value);

    let keys = Object.keys(localStorage); //Gets all keys in local Storage
    let values = Object.values(localStorage); //Gets all Values in local Storage
    if(keys!=undefined && keys.length>0)
    {
       for(var i= 0; i<keys.length;i++)
       {
           if(document.getElementById(keys[i])!=null && document.getElementById(keys[i])!=undefined)
           {
           document.getElementById(keys[i]).value = values[i];
           }
       }
    }

    //localStorage.firstName = e.value;
    //localStorage.lastName = e.value;
}

// Static way of setting property 
// function StorefirstName(e)
// {
//     //localStorage.setItem(e.id,e.value);

//     localStorage.firstName = e.value;
// }
// function StoreLastName(e)
// {
//     //localStorage.setItem(e.id,e.value);

//     localStorage.lastName = e.value;
// }

/*function storeSearch1(){
    var searchBox1=document.getElementById("first name").value;
    localStorage.search=searchBox1;
}
function loadOldSearch1(){
    var searchBox1=document.getElementById("first name");
    searchBox1.value=localStorage.search;
}
//stack overflow
window.onload = function() {
    var name = localStorage.getItem(name);
    if (name !== null) document.getElemenyById("first name").value = name;
}*/

//for gender may be this will work => document.gendersForm.gender.value="F";
//capture the first and last name and compare to make sure they are not the same*****
//validate that phone number does not let user to type anything besides numerical digits *******
///START of Actual code

/*---Events we used ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
onsubmit


---Created a valid method and called it on 'onsubmit' of form 
valide method will check values in firstname and lastname to make sure they are not same

---Created a StoreValues method and passed 'this' as an argument to it 
StoreValues will store items in a localstorage generic way (id is stored as key and value is stored as value)

---Created a GetValues method and called it on 'window.onload' 
GetValues method will first create keys and values array from localstorage
Then it will loop though all keys which is all ids in localstorage 
Then foreach key it will find the html element and set its value from values array . 

---addEventListener
Any HTML element 'DOM element' including window object .

<input type='text..../>
document.getelementbyID('')  ==> DOM element 
-can add eventListener to any DOM elements or HTML elements*/


//EventListener***------
//let phoneElememt = document.getElementById('txtphone');
//inside the addEventListener parameter(name of event, name of method/function to be executed, false/true for call back)

//phoneElememt.addEventListener('change','StoreValues(this)',false); 

//remove an element from an element
//let formElement = document.getElementById("formSignup");
//formElememt.removeEventListener('submit','validate()', false);

/*let radiosElement = document.getElementById("radios");
let newradioElement = "<input type='radio' name='gender' id='notanswere' value='NA' onchange='storeGender(this);' required >PreferNotAnswer</input>"
radiosElement.appendChild(newradioElement);

 Static way of setting property 
 function StorefirstName(e)
 {
     //localStorage.setItem(e.id,e.value);;

     localStorage.firstName = e.value;
 }
 function StoreLastName(e)
 {
     //localStorage.setItem(e.id,e.value);

     localStorage.lastName = e.value;
}*/

/*
window.addEventListener('load', ()=>{
    var phoneElement = document.getElementById("txtphone");
    phoneElement.addEventListener('change', StoreValues(phoneElement));
})
*/

//We will register the body load event to call GetValuesfromStorage to polulate all input field values 
window.onload = function() {
   let form = document.getElementById('formSignup');
   form.addEventListener('load',GetValuesfromStorage());

   //create a new radio button and new label for gender
   var radiosElementContainer = document.getElementById("radios");  //get the container that has all radio button
   var newradioElement = document.createElement("input");  //create an element of type input 
   newradioElement.id = "notanswered"; //setting id of newly created element
   newradioElement.value = "NA"; //setting value of newly created element
   newradioElement.type = "radio"; //setting type of newly created element
   newradioElement.onchange= storeGender(newradioElement); //setting onchange of newly created element
   newradioElement.name = "gender"; //setting name of newly created element


   radiosElementContainer.appendChild(newradioElement); //adding the element to the container

   var label = document.createElement("label"); // create a label for our new radio button
   label.innerText = "PreferNotToAnswer"; //set the text of that label
   radiosElementContainer.appendChild(label); //add it to the container

//create a new element and a new label for middle name //<div class="form-group">
   var formElementContainer = document.getElementById("divnames");

   var label=document.createElement("label");
   label.innerText = "Enter Middle Name (suffix) :";
   formElementContainer.appendChild(label);  

   //create a break in between label and input 
   var createBreak = document.createElement("br");
   formElementContainer.appendChild(createBreak);


   var formElement = document.createElement("input");
   formElement.id="txtMiddleName";
   formElement.name="middle name";
   formElement.type="text";
   formElement.placeholder="Middle Name";
   formElement.class="form-control";
   formElement.onchange = StoreValues(formElement);

   formElementContainer.appendChild(formElement); 
}

//remove 
    function(){
        let radioelement = selector ('male');
        radioelement.parentNode.removeChild(radioelement);
}

function Validate()
{
    let firstName = document.getElementById('txtfirstName');
    let lastName = document.getElementById('txtlastName');

    if(firstName.value == lastName.value)
    {
        alert("firstname and lastname cannot be the same");
        return false;
    }

    return true;
}

function StoreValues(e)
{
    //Generic way to store individual items
        localStorage.setItem(e.id,e.value);
    
    //localStorage.firstName = e.value;
    //localStorage.lastName = e.value;
}

function storeGender(e)
{
    localStorage.setItem('genderkey', e.value); //the name of key can be anything at the time of setting but use the same name for getting it
}

function GetValuesfromStorage()
{
    //Generic way to store individual items
    //localStorage.getItem(e.id,e.value);


  //document.[FORMNAME].[groupName].value = [read from local storage]  
    document.frmSignup.gender.value = localStorage.genderkey;  

    let keys = Object.keys(localStorage); //Gets all keys in local Storage
    let values = Object.values(localStorage); //Gets all Values in local Storage
    if(keys!=undefined && keys.length>0)
    {
       for(var i= 0; i<keys.length;i++)
       {
           if(document.getElementById(keys[i])!=null && document.getElementById(keys[i])!=undefined)
           {
              document.getElementById(keys[i]).value = values[i];
           }
       }
    }
}



